(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{112:function(t,e,o){"use strict";o.r(e);var n,c=o(0),i=o.n(c),a=o(12),l=o.n(a),d=o(25),r=o(40),s=o(89),O=o(155),u=o(158),j=o(161),b=o(156),f=o(159),h=o(157),p=o(146),x=o(79),m=o.n(x);!function(t){t.GET_TODO="GET_TODO",t.TODO_LOADING="TODO_LOADING",t.TODO_ERROR="TODO_ERROR",t.ADD_TODO="ADD_TODO",t.CHANGE_TODO="CHANGE_TODO",t.COMPLETE_TODO="COMPLETE_TODO",t.REMOVE_TODO="REMOVE_TODO",t.REMOVE_ALL_COMPLETED="REMOVE_ALL_COMPLETED"}(n||(n={}));var v=o(68);o(113);v.a.initializeApp({apiKey:"AIzaSyCeER6YZTi2m3_EXoFq6sCTBCWiCYROihE",authDomain:"react-todo-2ad17.firebaseapp.com",projectId:"react-todo-2ad17",storageBucket:"react-todo-2ad17.appspot.com",messagingSenderId:"807564659019",appId:"1:807564659019:web:4b62c5f38d0190b8ba80ce"});var E=v.a.firestore(),g=function(){return{type:n.TODO_LOADING}},T=function(t){return{type:n.TODO_ERROR,payload:t.message}},y=o(5),D=function(){var t=Object(d.b)(),e=Object(c.useState)(""),o=Object(r.a)(e,2),i=o[0],a=o[1];return Object(y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){(e.preventDefault(),""!==i)&&(t(function(t){var e=t.text,o=t.completed;return function(t){t(g()),E.collection("todos").add({text:e,completed:o}).then((function(e){e.get().then((function(e){if(void 0!==e){var o,c,i={id:e.id,text:String(null===e||void 0===e||null===(o=e.data())||void 0===o?void 0:o.text),completed:Boolean(null===e||void 0===e||null===(c=e.data())||void 0===c?void 0:c.completed)};t({type:n.ADD_TODO,payload:i})}}))})).catch((function(e){t(T(e))}))}}({text:i,completed:!1})),a(""))},children:Object(y.jsxs)(u.a,{display:"flex",alignItems:"flex-start",mb:3,children:[Object(y.jsx)(u.a,{flexGrow:"1",children:Object(y.jsx)(h.a,{label:"Todo Text",multiline:!0,rowsMax:7,fullWidth:!0,value:i,onChange:function(t){a(t.target.value)}})}),Object(y.jsx)(p.a,{type:"submit",children:Object(y.jsx)(m.a,{})})]})})},_=o(14),A=o(145),R=o(115),C=o(62),L=o(148),M=o(149),G=o(150),k=o(151),I=o(152),w=o(80),N=o.n(w),S=o(82),H=o.n(S),V=o(83),P=o.n(V),z=o(81),W=o.n(z),B=o(84),Y=o.n(B),F=o(147),J=Object(F.a)((function(t){return{todoItem:{"&.completed":{textDecoration:"line-through"}},inputHolder:{display:"flex",position:"absolute",top:0,left:0,width:"100%",height:"100%",minHeight:"100%"},btnGroup:{minHeight:"100%",marginLeft:t.spacing(1)},fadeEnter:{opacity:0},fadeEnterActive:{opacity:1,transition:"opacity 500ms 500ms"},fadeExit:{opacity:1},fadeExitActive:{opacity:0,transition:"opacity 500ms"},textHolder:{width:"100%"}}})),q=o(160),K=function(t){var e=t.id,o=t.completed,n=t.text,a=t.completeTodo,l=t.deleteTodo,d=t.changeTodo,s=J(),O=Object(c.useState)(n),j=Object(r.a)(O,2),b=j[0],f=j[1],x=Object(c.useState)(!1),m=Object(r.a)(x,2),v=m[0],E=m[1],g=i.a.useRef(null),T=i.a.useRef(null);return Object(y.jsxs)(L.a,{className:"".concat(s.todoItem,"  ").concat(o?"completed":""),children:[Object(y.jsx)(M.a,{children:Object(y.jsx)(p.a,{"aria-label":"toggle",color:"primary",onClick:function(){f(n),E(!1),a(e)},children:o?Object(y.jsx)(N.a,{}):Object(y.jsx)(W.a,{})})}),Object(y.jsxs)(u.a,{position:"relative",flexGrow:"1",height:"100%",minHeight:"40px",display:"flex",alignItems:"center",children:[Object(y.jsx)(q.a,{in:v,timeout:1e3,unmountOnExit:!0,nodeRef:T,classNames:{enter:s.fadeEnter,enterActive:s.fadeEnterActive,exit:s.fadeExit,exitActive:s.fadeExitActive},children:Object(y.jsxs)("div",{className:s.inputHolder,ref:T,children:[Object(y.jsx)(u.a,{flexGrow:"1",children:Object(y.jsx)(h.a,{value:b,onChange:function(t){f(t.target.value)},variant:"outlined",fullWidth:!0,size:"small"})}),Object(y.jsxs)(G.a,{variant:"contained",color:"primary",size:"small",className:s.btnGroup,children:[Object(y.jsx)(R.a,{onClick:function(){""!==b&&(d(e,b),E(!1))},children:Object(y.jsx)(H.a,{})}),Object(y.jsx)(R.a,{onClick:function(){f(n),E(!1)},children:Object(y.jsx)(P.a,{})})]})]})}),Object(y.jsx)(q.a,{in:!v,timeout:1e3,unmountOnExit:!0,nodeRef:g,classNames:{enter:s.fadeEnter,enterActive:s.fadeEnterActive,exit:s.fadeExit,exitActive:s.fadeExitActive},children:Object(y.jsx)("div",{className:s.textHolder,ref:g,onDoubleClick:function(){o||E(!v)},children:Object(y.jsx)(k.a,{primary:n})})})]}),Object(y.jsx)(I.a,{children:Object(y.jsx)(p.a,{edge:"end","aria-label":"delete",color:"secondary",onClick:function(){return l(e)},children:Object(y.jsx)(Y.a,{})})})]})},X=function(){var t,e,o,i=Object(d.b)(),a=Object(d.c)((function(t){return t.todo})),l=function(t){i(function(t){return function(e){e(g());var o=E.collection("todos").doc(t);o.get().then((function(c){if(c.exists){var i,a=null===(i=c.data())||void 0===i?void 0:i.completed;o.update({completed:!a}).then((function(){e({type:n.COMPLETE_TODO,payload:{id:t,completed:!a}})})).catch((function(t){e(T(t))}))}})).catch((function(t){e(T(t))}))}}(t))},r=function(t){i(function(t){return function(e){e(g()),E.collection("todos").doc(t).delete().then((function(){e({type:n.REMOVE_TODO,payload:t})})).catch((function(t){e(T(t))}))}}(t))},s=function(t,e){i(function(t,e){return function(o){o(g());var c=E.collection("todos").doc(t);c.get().then((function(i){i.exists&&c.update({text:e}).then((function(){o({type:n.CHANGE_TODO,payload:{id:t,text:e}})})).catch((function(t){o(T(t))}))})).catch((function(t){o(T(t))}))}}(t,e))};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(A.a,{children:null===(t=a.todos)||void 0===t?void 0:t.map((function(t){return Object(c.createElement)(K,Object(_.a)(Object(_.a)({},t),{},{key:t.id,completeTodo:l,deleteTodo:r,changeTodo:s}))}))}),(null===(e=a.todos)||void 0===e?void 0:e.find((function(t){return t.completed})))?Object(y.jsx)(u.a,{textAlign:"right",py:2,children:Object(y.jsx)(R.a,{variant:"outlined",size:"small",onClick:function(){i((function(t){t(g()),E.collection("todos").get().then((function(e){e.forEach((function(e){e.data().completed&&E.collection("todos").doc(e.id).delete().catch((function(e){t(T(e))}))}))})).then((function(){t({type:n.REMOVE_ALL_COMPLETED})})).catch((function(e){t(T(e))}))}))},children:"Delete all completed todos"})}):null,(null===(o=a.todos)||void 0===o?void 0:o.find((function(t){return!t.completed})))?Object(y.jsx)(u.a,{textAlign:"center",py:2,children:Object(y.jsx)(C.a,{variant:"overline",children:"To change the todo double click on the item"})}):null]})},Z=o(153),Q=o(154),U=function(t){var e=t.children;return Object(y.jsxs)(u.a,{position:"relative",overflow:"hidden",width:"100%",py:4,children:[Object(y.jsx)(Z.a,{}),Object(y.jsxs)(Q.a,{maxWidth:"md",children:[Object(y.jsx)(u.a,{mb:3,children:Object(y.jsx)(C.a,{variant:"h2",align:"center",color:"primary",children:"Todos List"})}),e]})]})},$=o(85),tt=o.n($),et=o(86),ot=o.n(et),nt=function(){var t,e=Object(d.b)(),o=Object(d.c)((function(t){return t.todo})),i=Object(c.useState)("light"),a=Object(r.a)(i,2),l=a[0],h=a[1];Object(c.useEffect)((function(){e((function(t){t(g()),E.collection("todos").get().then((function(e){if(e.size){var o=[];e.forEach((function(t){o.push({id:t.id,text:t.data().text,completed:t.data().completed})})),t({type:n.GET_TODO,payload:o})}else t({type:n.GET_TODO,payload:null})})).catch((function(e){t(T(e))}))})),"dark"===localStorage.getItem("themeMode")?h("dark"):h("light")}),[]);var p=Object(s.a)({palette:{type:l}});return Object(y.jsx)(O.a,{theme:p,children:Object(y.jsxs)(U,{children:[Object(y.jsx)(u.a,{position:"absolute",top:16,right:16,children:Object(y.jsx)(j.a,{color:"primary",icon:"light"===l?Object(y.jsx)(tt.a,{}):Object(y.jsx)(ot.a,{}),label:"light"===l?"light theme":"dark theme",onClick:function(){var t="light"===l?"dark":"light";h(t),localStorage.setItem("themeMode",t)}})}),o.loading&&Object(y.jsx)(u.a,{position:"fixed",top:"0",left:"0",width:"100%",zIndex:"modal",children:Object(y.jsx)(b.a,{})}),Object(y.jsx)(D,{}),o.error&&Object(y.jsx)(u.a,{py:1,children:Object(y.jsx)(f.a,{severity:"error",children:o.error})}),!(null===(t=o.todos)||void 0===t?void 0:t.length)&&Object(y.jsx)(u.a,{py:1,children:Object(y.jsx)(f.a,{severity:"info",children:"You don't have a todo list!"})}),Object(y.jsx)(X,{})]})})},ct=o(30),it=o(87),at=o(88),lt=o(90),dt={todos:null,loading:!1,error:null},rt=function(){var t,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case n.TODO_LOADING:return Object(_.a)(Object(_.a)({},o),{},{loading:!0,error:null});case n.TODO_ERROR:return Object(_.a)(Object(_.a)({},o),{},{error:c.payload,loading:!1});case n.GET_TODO:return Object(_.a)(Object(_.a)({},o),{},{todos:c.payload,loading:!1});case n.COMPLETE_TODO:return Object(_.a)(Object(_.a)({},o),{},{loading:!1,todos:o.todos?null===(t=o.todos)||void 0===t?void 0:t.map((function(t){return t.id===c.payload.id?Object(_.a)(Object(_.a)({},t),{},{completed:c.payload.completed}):t})):null});case n.REMOVE_TODO:return Object(_.a)(Object(_.a)({},o),{},{loading:!1,todos:o.todos?o.todos.filter((function(t){return t.id!==c.payload})):null});case n.REMOVE_ALL_COMPLETED:return Object(_.a)(Object(_.a)({},o),{},{loading:!1,todos:o.todos?o.todos.filter((function(t){return!t.completed})):null});case n.ADD_TODO:return Object(_.a)(Object(_.a)({},o),{},{loading:!1,todos:o.todos?[].concat(Object(lt.a)(o.todos),[c.payload]):null});case n.CHANGE_TODO:return Object(_.a)(Object(_.a)({},o),{},{loading:!1,todos:o.todos?null===(e=o.todos)||void 0===e?void 0:e.map((function(t){return t.id===c.payload.id?Object(_.a)(Object(_.a)({},t),{},{text:c.payload.text}):t})):null});default:return o}},st=Object(ct.combineReducers)({todo:rt}),Ot=Object(ct.createStore)(st,Object(it.composeWithDevTools)(Object(ct.applyMiddleware)(at.a)));l.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(d.a,{store:Ot,children:Object(y.jsx)(nt,{})})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.c420610e.chunk.js.map